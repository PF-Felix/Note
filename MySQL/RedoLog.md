数据是存放在磁盘中的，如果每次读写数据都需做磁盘IO操作，并发场景下性能就会很差，为此 Mysql 引入缓存 BufferPool 来缓解数据库的磁盘压力

- 当从数据库读数据时，首先从缓存中读取，如果缓存中没有，则从磁盘读取后放入缓存
- 当向数据库写入数据时，先向缓存写入，此时缓存中的数据页数据变更，这个数据页称为脏页
- BufferPool 中的数据会定期刷到磁盘中，这个过程称为刷脏页

数据库宕机，如果刷脏页还未完成，内存中的更新丢失就无法保证事务的持久化，为了解决这个问题引入了 RedoLog
RedoLog 是物理日志不是逻辑日志，记录的是数据库中每个页的修改，用来恢复事务提交后的物理数据页
写日志和写数据的顺序：先写日志，再修改 BufferPool 中的数据；如果顺序反过来，可能存在日志和数据不一致的情况

RedoLog 也是先在内存中缓存的，有个参数`innodb_flush_log_at_trx_commit`可以控制 RedoLog 刷盘时机
- 0：事务提交时不立即刷盘，这个任务是交给后台线程做的（可能造成数据的修改丢失）（每秒写入OS Buffer）
- 1：事务提交时立即刷盘，可以保证事务的持久性，是默认值（每次写入OS Buffer + 刷盘）
- 2：事务提交时将 RedoLog 写到操作系统缓冲区，不保证刷盘（每次写入OS Buffer）
> 是在博锐做的商城APP

# 业务组成

`数字马力面试中的业务架构`

> 在业务架构方面，主要关注系统的功能需求、业务流程以及业务特点。通过与业务部门密切合作，梳理了用户需求和业务流程，确定了系统的关键功能模块，比如下面这些。
> 同时，我们还对业务数据进行建模和分析，确保了业务架构的合理性和完整性。
>
> 深刻认识和经验：
> 多年的经验告诉了我深入理解业务需求和业务流程的重要性。在项目初期，我们需要花费更多的时间和精力去梳理和分析业务需求，确保系统的功能设计和业务流程符合用户的需求和预期。同时，我们也需要不断与业务人员进行沟通和协作，及时获取用户的反馈和意见，以便对系统进行优化和改进。

- 用户中心：注册、登录、鉴权、账号安全、用户下线
- 运营用户管理：管理员增删改查运营用户、权限管理
- 商品管理：商品分类、品牌/制造商、属性、商品上架下架
- APP页面：首页、商品分类、搜索、商品列表、商品详情、评价
- 交易：购物车、下单、支付、退货、退款
- 促销：秒杀活动、促销活动、拼团活动
- 红包雨
- 库存管理：采购入库
- 物流系统
- 客服：在线人工、售后系统

# 技术架构

`数字马力面试中的技术架构`

> 在技术架构方面，我们综合考虑了项目的需求、团队的技术实力以及未来的可维护性。
>
> 首先，我们采用了敏捷开发方法，以短周期迭代开发的方式进行项目开发。这使得我们可以快速响应需求变更，提高开发效率和质量。
>
> 为了实现前后端分离，我们采用了 RESTful API 进行前后端交互。前后端分离可以独立开发和测试，降低了耦合度。
>
> 为了降低网络延时，利用了 CDN 来缓存静态资源，减少响应时间
>
> 在数据库方面
> 我们选择 MySQL 做数据持久化存储，通过分库分表和读写分离进行请求分流，实现了高性能的读写。
> 使用 Redis 作为缓存层来提高系统性能。
> 同时还使用了 Elasticsearch 来提供搜索功能，使用 RocketMQ 来实现异步消息处理。
>
> 而且考虑到高可用，将并发量大的容易出现问题的业务与主业务进行服务隔离，避免影响到主业务。
>
> 为了及时处理线上问题，我们有专门的服务实时监控各个微服务的健康状态，出现问题及时报警。
>
> 这些技术的综合应用使得我们的系统具有良好的性能和可扩展性。
>
> 在数据安全方面
> 存储安全：对于必须要解密的数据，比如密码，采用散列算法加密，不用担心被逆向破解；对于需要解密的数据，采用可逆的对称加密算法，比非对称加密更快
> 传输安全：使用了 https 保证的数据的防泄密和防伪造，而且针对需要响应给用户的敏感数据进行脱敏处理后再响应

首先项目是**动静分离**的

静态资源都存储在**CDN**加快了静态资源的访问速度

源站采用**微服务架构**
项目按照功能以及其他边界拆分成了多个应用，对流量进行了分流
每个应用都是一个无状态集群，方便横向扩展，进行了进一步分流，集群内服务越多能够支撑的流量就越大

**Nginx**做流量网关，做负载均衡与流量转发，搭配 keepalived 实现高可用

**gateway**是业务网关，做鉴权等工作
为什么用了 gateway 还要用 nginx？
因为 gateway 的性能远不及 nginx，使用 nginx 能接入更多的流量，再分发给 gateway 集群

**Nacos**作注册中心和配置中心

**Sentinel**用作限流、熔断和降级，使用压测的数据做限流

链路监控用**skywalking**

**Redis集群**作分布式缓存

**RocketMQ**用作解耦、异步、削峰、最终一致性等场景

数据持久化用**MySQL**主从架构

商品搜索引擎使用**ES**

**分布式定时任务调度**用XXL-JOB
**分布式ID**利用两台Redis实现
**分布式事务**用Seata
**分布式锁**用Redisson

对象云存储使用的**阿里云OSS**

运维部署使用**K8S**

# 服务划分

`数字马力面试中的系统架构`

> 在系统架构方面，注重模块化、可扩展性和高可用性。
>
> 首先，将系统划分为前端用户界面、后端业务逻辑和数据存储三个主要模块。前端用户界面负责与用户交互，后端业务逻辑处理业务逻辑，数据存储负责数据的读写。
>
> 为了提高系统的可扩展性，我们采用了微服务架构，将各个功能模块划分为独立的微服务。这种架构使得每个微服务都可以独立开发、测试和部署，大大提高了开发效率。
>
> 同时，我们还采用了云原生容器化技术（Docker、K8S）实现了快速部署和水平扩展。
>
> 为了确保高可用性，我们采用了负载均衡和容错机制。通过配置负载均衡器，我们将请求分散到多个服务器上，确保了系统的吞吐量和响应速度。同时，容错机制使得当部分服务器发生故障时，系统仍能保持正常运行。

- 网关服务
- 用户服务
- 商品服务（包括购物车、评价）
- 搜索服务
- 秒杀服务
- 促销服务
- 库存服务
- 订单服务
- 第三方接入服务
- 客服服务

# 用户量+数据量+并发量+硬件配置

后期的用户量有15W，日活1W+，QPS 在 2000 左右，这个配置足以满足日常的需求

以商品中心举例：服务器配置是 CentOS7 2C4G，压测结果是一台服务可以支撑 1500QPS，考虑到 2000QPS 我们使用了三台服务器

**QPS**

~~1000QPS 是什么水平？~~

一些简单的网站或者小型应用可能只需要处理几十个QPS
一些中等规模的应用可能需要处理几百到几千的QPS
而一些大型应用则需要处理数万个甚至更多的QPS

因此，1000QPS 能够满足一些中等规模的应用需求，但对于一些大型应用来说，可能需要更高的QPS

![zoom=70](image-20231007093736903.png)

~~2C4G能支持多少QPS~~

一般而言，这样的服务器能够支持大约几百到几千的QPS

~~QPS如何估算~~

![zoom=70](image-20231007093859435.png)

# 项目人员+开发周期

**这个如果不问就不说**

项目人员：研发负责人、后端开发、安卓/IOS、UI、测试、运维；总人数20+

项目上线用了2个月

# 其他项目经验

> 文档编写和知识积累的重要性。包括需求文档、设计文档、测试文档、代码注释等。通过这些文档和资料能更好地理解项目的过程和结果，为未来的项目提供宝贵的经验和支持。

> 不断学习和自我提升的重要性。不断学习和尝试新的技术和方法，提高技术水平和解决问题的能力。

